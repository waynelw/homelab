# 节点选择器实验配置文件

---
# 基础节点选择器 Pod
apiVersion: v1
kind: Pod
metadata:
  name: node-selector-demo
  namespace: experiments
  labels:
    app: node-selector-demo
spec:
  containers:
  - name: nginx
    image: nginx:1.21
    ports:
    - containerPort: 80
    resources:
      requests:
        memory: "64Mi"
        cpu: "250m"
      limits:
        memory: "128Mi"
        cpu: "500m"
  nodeSelector:
    environment: production
    hardware-type: gpu
  restartPolicy: Always

---
# 多标签匹配 Pod
apiVersion: v1
kind: Pod
metadata:
  name: multi-label-demo
  namespace: experiments
  labels:
    app: multi-label-demo
spec:
  containers:
  - name: nginx
    image: nginx:1.21
    ports:
    - containerPort: 80
    resources:
      requests:
        memory: "64Mi"
        cpu: "250m"
      limits:
        memory: "128Mi"
        cpu: "500m"
  nodeSelector:
    environment: production
    zone: us-west-1
  restartPolicy: Always

---
# 调度失败的 Pod（用于演示）
apiVersion: v1
kind: Pod
metadata:
  name: node-selector-fail
  namespace: experiments
  labels:
    app: node-selector-fail
spec:
  containers:
  - name: nginx
    image: nginx:1.21
    ports:
    - containerPort: 80
    resources:
      requests:
        memory: "64Mi"
        cpu: "250m"
      limits:
        memory: "128Mi"
        cpu: "500m"
  nodeSelector:
    environment: development  # 不存在的标签，会导致调度失败
  restartPolicy: Always

---
# 使用系统预定义标签的 Pod
apiVersion: v1
kind: Pod
metadata:
  name: system-label-demo
  namespace: experiments
  labels:
    app: system-label-demo
spec:
  containers:
  - name: nginx
    image: nginx:1.21
    ports:
    - containerPort: 80
    resources:
      requests:
        memory: "64Mi"
        cpu: "250m"
      limits:
        memory: "128Mi"
        cpu: "500m"
  nodeSelector:
    kubernetes.io/os: linux  # 使用系统预定义标签
  restartPolicy: Always
