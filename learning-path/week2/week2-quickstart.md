# ğŸš€ Week 2 - Istio å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ“‹ ç®€ä»‹

è¿™ä¸ªæŒ‡å—å°†å¸®åŠ©æ‚¨å¿«é€Ÿå¼€å§‹ Istio æœåŠ¡ç½‘æ ¼çš„å­¦ä¹ å’Œå®è·µã€‚

## â±ï¸ é¢„è®¡æ—¶é—´

- **ç†è®ºå­¦ä¹ **: 3-4 å°æ—¶
- **å®è·µæ“ä½œ**: 6-8 å°æ—¶
- **æ€»è®¡**: 10-12 å°æ—¶

## ğŸ¯ å­¦ä¹ è·¯å¾„

```mermaid
graph TB
    A[é˜…è¯»å­¦ä¹ æŒ‡å—] --> B[äº†è§£æœåŠ¡ç½‘æ ¼æ¦‚å¿µ]
    B --> C[å­¦ä¹  Istio æ¶æ„]
    C --> D[å®è·µéƒ¨ç½²]
    D --> E[é…ç½®æµé‡ç®¡ç†]
    E --> F[å®ç°ç°åº¦å‘å¸ƒ]
    F --> G[æµ‹è¯•æ•…éšœæ³¨å…¥]
    G --> H[é…ç½®ç†”æ–­å™¨]
    H --> I[å®Œæˆ Week 2]
```

## ğŸ“š æ–‡æ¡£é˜…è¯»é¡ºåº

1. **week2-istio-guide.md** - ç†è§£æœåŠ¡ç½‘æ ¼æ¦‚å¿µå’Œ Istio æ¶æ„
2. **week2-practice-guide.md** - è·Ÿéšå®è·µæ­¥éª¤æ“ä½œ
3. **week2-progress.md** - è®°å½•å­¦ä¹ è¿›åº¦

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šå®‰è£… Istio

```bash
cd /home/lw/homelab/ecommerce-microservices
./scripts/install-istio.sh
```

### ç¬¬äºŒæ­¥ï¼šåº”ç”¨é…ç½®

```bash
# åº”ç”¨åŸºç¡€é…ç½®
kubectl apply -f infrastructure/kubernetes/istio-config.yaml

# åº”ç”¨é«˜çº§é…ç½®
kubectl apply -f infrastructure/kubernetes/istio-advanced.yaml
```

### ç¬¬ä¸‰æ­¥ï¼šéªŒè¯å®‰è£…

```bash
# æ£€æŸ¥ Istio çŠ¶æ€
istioctl proxy-status

# æŸ¥çœ‹ Istio èµ„æº
kubectl get vs,dr,gateway -n ecommerce-microservices
```

## ğŸ“ å­¦ä¹ æ£€æŸ¥æ¸…å•

### ç†è®ºå­¦ä¹ 
- [ ] ç†è§£æœåŠ¡ç½‘æ ¼çš„ä»·å€¼
- [ ] æŒæ¡ Istio æ¶æ„ï¼ˆæ§åˆ¶å¹³é¢ vs æ•°æ®å¹³é¢ï¼‰
- [ ] ç†è§£ Sidecar æ¨¡å¼
- [ ] å­¦ä¹  VirtualService å’Œ DestinationRule
- [ ] äº†è§£ç°åº¦å‘å¸ƒæµç¨‹

### å®è·µæ“ä½œ
- [ ] å®‰è£… Istio åˆ°é›†ç¾¤
- [ ] éƒ¨ç½²æœåŠ¡å¹¶æ³¨å…¥ Sidecar
- [ ] é…ç½®æµé‡è·¯ç”±
- [ ] å®ç° 10% ç°åº¦å‘å¸ƒ
- [ ] æµ‹è¯•æ•…éšœæ³¨å…¥
- [ ] é…ç½®ç†”æ–­å™¨
- [ ] ä½¿ç”¨ istioctl è°ƒè¯•

### é«˜çº§æ“ä½œ
- [ ] é…ç½® mTLS
- [ ] è®¾ç½®æˆæƒç­–ç•¥
- [ ] é›†æˆåˆ†å¸ƒå¼è¿½è¸ª
- [ ] é…ç½®è¯·æ±‚é‡è¯•

## ğŸ“ å­¦ä¹ å»ºè®®

### ç¬¬ä¸€å¤©ï¼šç†è®ºå­¦ä¹ ï¼ˆ3-4 å°æ—¶ï¼‰
- ä¸Šåˆï¼šé˜…è¯» `week2-istio-guide.md`
- ä¸‹åˆï¼šå­¦ä¹  Istio æ ¸å¿ƒæ¦‚å¿µ
- æ™šä¸Šï¼šé˜…è¯»å®˜æ–¹æ–‡æ¡£

### ç¬¬äºŒå¤©ï¼šå®è·µéƒ¨ç½²ï¼ˆ4-5 å°æ—¶ï¼‰
- ä¸Šåˆï¼šå®‰è£… Istio å’Œéƒ¨ç½²æœåŠ¡
- ä¸‹åˆï¼šé…ç½®æµé‡ç®¡ç†å’Œè·¯ç”±
- æ™šä¸Šï¼šæµ‹è¯•åŸºç¡€åŠŸèƒ½

### ç¬¬ä¸‰å¤©ï¼šè¿›é˜¶å®è·µï¼ˆ4-5 å°æ—¶ï¼‰
- ä¸Šåˆï¼šå®ç°ç°åº¦å‘å¸ƒ
- ä¸‹åˆï¼šæµ‹è¯•æ•…éšœæ³¨å…¥
- æ™šä¸Šï¼šé…ç½®ç†”æ–­å™¨å’Œä¼˜åŒ–

## ğŸ’¡ å­¦ä¹ æç¤º

1. **å…ˆç†è§£å†å®è·µ**ï¼šä¸è¦ç›´æ¥å¤åˆ¶å‘½ä»¤ï¼Œå…ˆç†è§£å…¶ä½œç”¨
2. **é‡åˆ°é—®é¢˜å…ˆæŸ¥æ–‡æ¡£**ï¼šIstio æ–‡æ¡£å¾ˆå®Œå–„
3. **å–„äºä½¿ç”¨å·¥å…·**ï¼š
   - `istioctl` - é…ç½®ç®¡ç†
   - `kubectl logs` - æŸ¥çœ‹æ—¥å¿—
   - `istioctl proxy-config` - æŸ¥çœ‹ä»£ç†é…ç½®
4. **è®°å½•é—®é¢˜**ï¼šé‡åˆ°é—®é¢˜è®°å½•ä¸‹æ¥ï¼Œä¾¿äºå¤ä¹ 
5. **ä¸è¦å®³æ€•å¤±è´¥**ï¼šå®éªŒç¯å¢ƒå¯ä»¥é‡æ–°éƒ¨ç½²

## ğŸ“Š æˆåŠŸæ ‡å‡†

å®Œæˆåæ‚¨åº”è¯¥èƒ½å¤Ÿï¼š

- âœ… è§£é‡ŠæœåŠ¡ç½‘æ ¼çš„ä»·å€¼å’Œé€‚ç”¨åœºæ™¯
- âœ… å®‰è£…å’Œé…ç½® Istio
- âœ… ä½¿ç”¨ VirtualService ç®¡ç†æµé‡
- âœ… ä½¿ç”¨ DestinationRule é…ç½®ç­–ç•¥
- âœ… å®ç°ç°åº¦å‘å¸ƒæµç¨‹
- âœ… æµ‹è¯•æ•…éšœæ³¨å…¥
- âœ… é…ç½®ç†”æ–­å™¨

## ğŸ› é‡åˆ°é—®é¢˜ï¼Ÿ

### æŸ¥çœ‹æ—¥å¿—
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
kubectl logs <pod-name> -c <container-name> -n ecommerce-microservices

# æŸ¥çœ‹ istio-proxy æ—¥å¿—
kubectl logs <pod-name> -c istio-proxy -n ecommerce-microservices
```

### æ£€æŸ¥é…ç½®
```bash
# æŸ¥çœ‹ Istio èµ„æº
kubectl get vs,dr,gateway -n ecommerce-microservices

# æŸ¥çœ‹ä»£ç†çŠ¶æ€
istioctl proxy-status

# æŸ¥çœ‹ä»£ç†é…ç½®
istioctl proxy-config route <pod-name>
```

### é‡ç½®ç¯å¢ƒ
```bash
# åˆ é™¤æ‰€æœ‰é…ç½®
kubectl delete vs,dr,gateway -n ecommerce-microservices --all

# é‡æ–°åº”ç”¨
kubectl apply -f infrastructure/kubernetes/istio-config.yaml
```

## ğŸ“– æ¨èé˜…è¯»

- [Istio å®˜æ–¹æ–‡æ¡£](https://istio.io/latest/docs/)
- [Istio ä»»åŠ¡](https://istio.io/latest/docs/tasks/)
- [Envoy ä»£ç†æ–‡æ¡£](https://www.envoyproxy.io/docs/envoy/latest/)

---

**ç¥æ‚¨å­¦ä¹ é¡ºåˆ©ï¼** ğŸš€
